
# MPI Ring Project

## Project Description
This MPI project demonstrates a ring communication pattern where an integer is passed among processes, incremented or decremented based on certain conditions. The program utilizes OpenMPI for parallel process management.

## System Requirements
- OpenMPI
- C++ compiler (e.g., g++, mpic++)
- Access to a Linux-based High-Performance Computing (HPC) environment or local setup with MPI configured.

## Create a file
A C++ file is prepared using the below command line.
```bash
nano bounce64.cpp
```

## Create a batch script file
A batch script file is created using the below command line
```bash
nano run_bounce64.slurm
```

## Setup and Configuration

### Load the OpenMPI Module
Ensure that OpenMPI is loaded in your environment. If you are using a module system, you can load it using the following command:
```bash
module load Openmpi/4.1.6
```
### Load the bash script
```bash
nano run_bounce64.sh
```
### Running with slurm
Create a Slurm job script (e.g., `run_bounce64.sh`):

```bash
#!/bin/bash
#SBATCH --verbose
#SBATCH --nodes=4               # Request 4 nodes
#SBATCH --ntasks-per-node=16    # 16 tasks (MPI ranks) per node => total of 64
#SBATCH --cpus-per-task=1
#SBATCH --time=00:30:00
#SBATCH --job-name=bounce64
#SBATCH --mem=100G
#SBATCH --partition=courses

# Load your MPI module if needed (this depends on your cluster)
# module load openmpi
module load OpenMPI/4.1.6

# Typically, under Slurm we can either use srun or mpirun. 
# A common approach with OpenMPI is simply:
#     mpirun -np 64 ./bounce64


# Here is a simple command using srun:
mpirun --oversubscribe -np 64 ./bounce64
```

### Compilation
To compile the MPI program, navigate to the directory containing your source code and run the following command:
```bash
mpic++ -o bounce64 bounce64.cpp
```

## Running the Program

### Standard Execution
To run the program on a system without the need for oversubscription:
```bash
sbatch run_bounce64.sh
```

## Output
After successfully compiling and executing the code, we get the output in below format:
```
Process X on node Y received value: Z
```
## Troubleshooting

### Module Not Found
If the `module load Openmpi/4.1.6` command fails, it may be because OpenMPI is not available on your system. Check with your system administrator or consult your system's documentation on how to install or load OpenMPI.

### Execution Issues
If you cannot run the program with the expected number of processes, check that you have sufficient permissions and resources. For detailed error analysis, consult the error messages provided by `mpirun` or check your system's resource limits (`ulimit -a`).

## Sources
https://gist.github.com/joastbg/f0256139dcf3825aeee4
https://github.com/cenit/jburkardt/blob/master/ring_mpi/ring_mpi.cpp
https://stackoverflow.com/questions/40584459/mpi-c-ring-topology-sends-and-receives-different-values-while-passing-only-the
